"use strict";(self.webpackChunkcommon_voice_docs=self.webpackChunkcommon_voice_docs||[]).push([[553],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=o,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||r;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},112:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),i=["components"],l={},s="Languages",c={unversionedId:"language",id:"language",title:"Languages",description:"Can we limit the available languages?",source:"@site/docs/language.md",sourceDirName:".",slug:"/language",permalink:"/common-voice-docs/docs/language",editUrl:"https://github.com/joanise/common-voice-docs/tree/main/docs/language.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Github Workflow",permalink:"/common-voice-docs/docs/github_workflow"},next:{title:"Aligner",permalink:"/common-voice-docs/docs/microservices/aligner"}},u={},d=[{value:"Default Language/Locale",id:"default-languagelocale",level:2},{value:"How to Add a New Language",id:"how-to-add-a-new-language",level:2},{value:"Generating Utterances",id:"generating-utterances",level:2}],p={toc:d};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"languages"},"Languages"),(0,r.kt)("p",null,"Can we limit the available languages?\n",(0,r.kt)("inlineCode",{parentName:"p"},"locales/all.json")," controls the available languages in the UI's drop down box.\nIt looks like the UI's language and the utterances' language are the same meaning that if you select English, you get the UI in English and you also get the utterances in English."),(0,r.kt)("h2",{id:"default-languagelocale"},"Default Language/Locale"),(0,r.kt)("p",null,"To change the default locale, we need to change ",(0,r.kt)("inlineCode",{parentName:"p"},"export const DEFAULT_LOCALE = 'mok';")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"web/src/services/localization.ts"),".\nNote that the choice of ",(0,r.kt)("inlineCode",{parentName:"p"},"DEFAULT_LOCALE")," must be in the list ",(0,r.kt)("inlineCode",{parentName:"p"},"locales/all.json"),"."),(0,r.kt)("h2",{id:"how-to-add-a-new-language"},"How to Add a New Language"),(0,r.kt)("p",null,"Since we haven't found a wait to have the UI in one language and the utterances in another language, we've decided to add a new language code for the utterances and copy the localizations of English to that new language.\nNote that you need to chose a valid iso code or else Common-Voice will not accept it.\nYou can find ISO-639-3 code here:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/List_of_ISO_639-3_codes"},"List of ISO 639-3 codes")," then click the first letter of your code."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes"},"List of ISO 639-1 codes"))),(0,r.kt)("p",null,"Let's see how to add ",(0,r.kt)("inlineCode",{parentName:"p"},"str")," to Common-Voice:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Visit ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/EveryVoiceTTS/common-voice"},"https://github.com/EveryVoiceTTS/common-voice")," and make sure you are on branch ",(0,r.kt)("inlineCode",{parentName:"li"},"dev/ilt"),";"),(0,r.kt)("li",{parentName:"ul"},"Add ",(0,r.kt)("inlineCode",{parentName:"li"},"str")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"locales/all.json")," in order to get that new language to show up in the UI's top-right dropdown box;"),(0,r.kt)("li",{parentName:"ul"},"Add ",(0,r.kt)("inlineCode",{parentName:"li"},"str")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"locales/contributable.json"),".  We weren't sure what ",(0,r.kt)("inlineCode",{parentName:"li"},"locales/contributable.json")," is for so we also added ",(0,r.kt)("inlineCode",{parentName:"li"},"str")," to it;"),(0,r.kt)("li",{parentName:"ul"},"In order to get the new language name to properly show up in the UI, add its full name to ",(0,r.kt)("inlineCode",{parentName:"li"},"locales/native-names.json"),".  This looks like ",(0,r.kt)("inlineCode",{parentName:"li"},'"str": "SEN\u0106O\u0166EN Origin Stories",'),".;"),(0,r.kt)("li",{parentName:"ul"},"Again, we weren't sure what ",(0,r.kt)("inlineCode",{parentName:"li"},"locales/translated.json")," is for and opted to add ",(0,r.kt)("inlineCode",{parentName:"li"},"str"),";"),(0,r.kt)("li",{parentName:"ul"},"We want the UI to be in English even for ",(0,r.kt)("inlineCode",{parentName:"li"},"str"),", you will have to use the English localizations for your new language.  We need to modify our template ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/en/messages.ftl")," to add our new language code with its description.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Open ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/en/messages.ftl"),","),(0,r.kt)("li",{parentName:"ul"},"Find the proper ",(0,r.kt)("inlineCode",{parentName:"li"},"##Languages")," section and add ",(0,r.kt)("inlineCode",{parentName:"li"},"str = SEN\u0106O\u0166EN"),","),(0,r.kt)("li",{parentName:"ul"},"Create a directory, ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/str/")," and copy the two files ",(0,r.kt)("inlineCode",{parentName:"li"},"cross-locale.ftl")," & ",(0,r.kt)("inlineCode",{parentName:"li"},"messages.ftl")," from ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/en/")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/str/"),",",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cp web/locales/en/* web/locales/str/\n"))),(0,r.kt)("li",{parentName:"ul"},"We also need to update ",(0,r.kt)("inlineCode",{parentName:"li"},"messages.ftl")," for all other locales.  For this, copy the modified ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/en/messages.ftl")," to all other ",(0,r.kt)("inlineCode",{parentName:"li"},"web/locales/*/"),"."))),(0,r.kt)("li",{parentName:"ul"},"Commit your changes;"),(0,r.kt)("li",{parentName:"ul"},"Wait for the new image to deploy the development;"),(0,r.kt)("li",{parentName:"ul"},"Validate your changes on ",(0,r.kt)("a",{parentName:"li",href:"https://staging.everyvoice.ca"},"https://staging.everyvoice.ca")," which is the development server;"),(0,r.kt)("li",{parentName:"ul"},"If your changes are correct, update the ",(0,r.kt)("inlineCode",{parentName:"li"},"ilt")," branch with ",(0,r.kt)("inlineCode",{parentName:"li"},"dev/ilt"),";"),(0,r.kt)("li",{parentName:"ul"},"Wait for the new image to deploy to the production environment;"),(0,r.kt)("li",{parentName:"ul"},"Finally, validate your changes on the production server ",(0,r.kt)("a",{parentName:"li",href:"https://studio.everyvoice.ca"},"https://studio.everyvoice.ca"),".")),(0,r.kt)("p",null,"To add your sentences, you need to add them to ",(0,r.kt)("inlineCode",{parentName:"p"},"https://github.com/EveryVoiceTTS/common-voice-corpora")," under ",(0,r.kt)("inlineCode",{parentName:"p"},"data/<ISO-639-3 Language Code>/"),".\nNote that Your corpora file MUST end with ",(0,r.kt)("inlineCode",{parentName:"p"},".txt"),"."),(0,r.kt)("h2",{id:"generating-utterances"},"Generating Utterances"),(0,r.kt)("p",null,"We also have a crude Lorem Ipsum generator but this is only meant to be used for testing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p server/data.ilt/git\nmkdir -p server/data.ilt/str\n\n./generator.py > server/data.ilt/git/utterances.txt\n./generator.py > server/data.ilt/str/utterances.txt\n")))}m.isMDXComponent=!0}}]);