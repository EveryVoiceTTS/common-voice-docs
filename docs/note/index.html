<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/common-voice-docs/blog/rss.xml" title="Common Voice at NRC RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/common-voice-docs/blog/atom.xml" title="Common Voice at NRC Atom Feed"><title data-rh="true">Notes | Common Voice at NRC</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/common-voice-docs/docs/note/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Notes | Common Voice at NRC"><meta data-rh="true" name="description" content="Links"><meta data-rh="true" property="og:description" content="Links"><link data-rh="true" rel="icon" href="/common-voice-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/common-voice-docs/docs/note/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/common-voice-docs/docs/note/" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/common-voice-docs/docs/note/" hreflang="x-default"><link rel="stylesheet" href="/common-voice-docs/assets/css/styles.f426f4e3.css">
<link rel="preload" href="/common-voice-docs/assets/js/runtime~main.28359d4a.js" as="script">
<link rel="preload" href="/common-voice-docs/assets/js/main.273f218e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/common-voice-docs/"><b class="navbar__title">Common Voice at NRC</b></a><a class="navbar__item navbar__link navbar__link--active" href="/common-voice-docs/docs/intro/">Docs</a><a class="navbar__item navbar__link" href="/common-voice-docs/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/joanise/common-voice-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/common-voice-docs/docs/intro/">Introduction to NRC&#x27;s Common Voice project and fork</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/common-voice-docs/docs/note/">Notes</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/common-voice-docs/">üè†</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/common-voice-docs/docs/note/">Notes</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Notes</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="links">Links<a class="hash-link" href="#links" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="https://github.com/common-voice/common-voice" target="_blank" rel="noopener noreferrer">Common Voice - Github</a> Mozilla Common Voice, a platform for collecting speech donations in order to create public domain datasets for training voice recognition-related tools.</li><li><a href="https://chat.mozilla.org/#/room/#common-voice:mozilla.org" target="_blank" rel="noopener noreferrer">Matrix Chat</a></li><li><a href="https://discourse.mozilla.org/c/voice/239" target="_blank" rel="noopener noreferrer">Discourse</a></li><li><a href="https://auth0.com/" target="_blank" rel="noopener noreferrer">Auth0</a></li><li><a href="https://www.npmjs.com/package/stream-transcoder" target="_blank" rel="noopener noreferrer">stream-transcoder.js</a> Flexible media transcoding using FFmpeg. Stream media in and out - converting it on the fly.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="tasks">Tasks<a class="hash-link" href="#tasks" title="Direct link to heading">‚Äã</a></h2><p>Hey Samuel, I mentioned I would pass on the info about what we‚Äôre looking for.
My guess is you‚Äôd want to be more involved in the ML part of the project no?
This is really a web development project.</p><p>Here‚Äôs a description:
We‚Äôre looking for a developer to create an instance of Mozilla Common Voice (<a href="https://github.com/common-voice/common-voice" target="_blank" rel="noopener noreferrer">https://github.com/common-voice/common-voice</a>) the stack is Docker, React, TypeScript, MySQL, S3.
Common Voice was set up to do crowd-source recording of audio, so there are some changes that would need to be made.
Namely:</p><ul><li>we need the data to be unavailable to the public</li><li>we need registration to be limited</li><li>we need minor style and markup changes (ie taking away the language around Mozilla and adding some markup around the project)</li><li>Common Voice currently collects audio in a lossy format (mp3), we need to change this to lossless
16bit, 48k sample rate, lossless wav files</li><li>Perhaps add some server-side scripting to automate signal processing/de-noising/backup</li><li>Is it set up so that auth0 let‚Äôs us define a list of email address or something that are whitelisted for signing up?
The recordings should also only be accessible to pre-defined sets of users.
Do you have a sense of whether it will be easier to password protect the entire site or whether we could have tiers of access for particular recordings?</li></ul><p>Let me know if you have any questions though!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="auth0">Auth0<a class="hash-link" href="#auth0" title="Direct link to heading">‚Äã</a></h2><p>Like it or not, you need a <a href="https://auth0.com/" target="_blank" rel="noopener noreferrer">Auth0</a> account to get Common Voice to work.
Add the following lines to <code>.env-local-docker</code> which is locate at the root of the git repository.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">CV_AUTH0_DOMAIN=&quot;dev-24cisdir.us.auth0.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CV_AUTH0_CLIENT_ID=&quot;&lt;YOUR_ID&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CV_AUTH0_CLIENT_SECRET=&quot;&lt;YOU_HAVE_A_SECRET&gt;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="whitelisting-emails">Whitelisting emails<a class="hash-link" href="#whitelisting-emails" title="Direct link to heading">‚Äã</a></h3><ul><li><a href="https://auth0.com/docs/customize/rules" target="_blank" rel="noopener noreferrer">Auth0 Rules</a></li><li><a href="https://auth0.com/docs/manage-users/user-accounts/manage-user-access-to-applications" target="_blank" rel="noopener noreferrer">Manage User Access to Applications</a></li><li><a href="https://github.com/auth0/rules/tree/aeaf93bc058408e260192d0941a688963449d6be/src/rules" target="_blank" rel="noopener noreferrer">Rules examples</a></li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/simple-user-whitelist-for-app.js" target="_blank" rel="noopener noreferrer">Whitelist for a Specific App</a> Only allow access to users with whitelist email addresses on a specific app.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/simple-user-whitelist.js" target="_blank" rel="noopener noreferrer">Whitelist</a> Only allow access to users with specific whitelist email addresses.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/simple-whitelist-on-a-connection.js" target="_blank" rel="noopener noreferrer">Whitelist on Specific Connection</a> Only allow access to users coming from a whitelist on specific connection.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/simple-domain-whitelist.js" target="_blank" rel="noopener noreferrer">Email domain whitelist</a> Only allow access to users with specific whitelist email domains.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/dropbox-whitelist.js" target="_blank" rel="noopener noreferrer">Whitelist on the cloud</a> Determine access to users based on a whitelist of emails stored in Dropbox.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/add-country.js" target="_blank" rel="noopener noreferrer">Add country to the user profile</a> Add a country attribute to the user based on their IP address.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/disable-social-signup.js" target="_blank" rel="noopener noreferrer">Disable social signups</a> Disable signups from social connections.</li><li><a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/email-verified.js" target="_blank" rel="noopener noreferrer">Force email verification</a> Only allow access to users with verified emails.</li></ul><p>Looking at <a href="https://github.com/auth0/rules/blob/aeaf93bc058408e260192d0941a688963449d6be/src/rules/simple-user-whitelist-for-app.js" target="_blank" rel="noopener noreferrer">Whitelist for a Specific App</a> seems to be promising.</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @title Whitelist for a Specific App</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @overview Only allow access to users with whitelist email addresses on a specific app</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @gallery true</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @category access control</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This rule will only allow access to users with specific email addresses on a specific app.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">user</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Access should only be granted to verified users.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email_verified</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">UnauthorizedError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Access denied.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// only enforce for NameOfTheAppWithWhiteList</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// bypass this rule for all other apps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">clientName</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NameOfTheAppWithWhiteList&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> whitelist </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user1@example.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user2@example.com&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// authorized users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userHasAccess </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> whitelist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> email </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">userHasAccess</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">UnauthorizedError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Access denied.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="languages">Languages<a class="hash-link" href="#languages" title="Direct link to heading">‚Äã</a></h2><p>Can we limit the available languages?
<code>locales/all.json</code> controls the available languages in the UI&#x27;s drop down box.
It looks like the UI&#x27;s language and the utterances&#x27; language are the same meaning that if you select English, you get the UI in English and you also get the utterances in English.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-add-a-new-language">How to Add a New Language<a class="hash-link" href="#how-to-add-a-new-language" title="Direct link to heading">‚Äã</a></h3><p>Since we haven&#x27;t found a wait to have the UI in one language and the utterances in another language, we&#x27;ve decided to add a new language code for the utterances and copy the localizations of English to that new language.</p><ul><li>Add <code>git</code> &amp; <code>str</code> to <code>locales/all.json</code> in order to get those new languages to show up in the UI&#x27;s top-right dropdown box;</li><li>We weren&#x27;t sure what <code>locales/contributable.json</code> is for so we also added <code>git</code> &amp; <code>str</code> to it;</li><li>In order to get the new language names to properly show up in the UI, we added their full names to <code>locales/native-names.json</code>;</li><li>Again, we weren&#x27;t sure what <code>locales/translated.json</code> is for and opted to add <code>git</code> &amp; <code>str</code> to it;</li><li>Under <code>server/data</code>, we created two directories, <code>git/</code> &amp; <code>str/</code> and populated them with some <code>utterances.txt</code>;</li><li>Finally, we want the UI to be in English even for <code>git</code> &amp; <code>str</code> so we&#x27;ve decided to use the English localizations for them.  We create two directories, <code>git/</code> &amp; <code>str/</code> under <code>web/locales/</code> and simply copied the two files from <code>en/</code>, <code>cross-locale.ftl</code> &amp; <code>messages.ftl</code> to each of the new languages&#x27; directory.</li></ul><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> en/* git/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> en/* str/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="changing-the-audio-format">Changing the Audio Format<a class="hash-link" href="#changing-the-audio-format" title="Direct link to heading">‚Äã</a></h2><p>To change the audio codec, the format &amp; the sample rate, you have to add the following lines to <code>.env-local-docker</code> which is located at the root of the repository.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">CV_TRANSCODE_CODEC=&#x27;pcm_s16le&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CV_TRANSCODE_FORMAT=&#x27;wav&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CV_TRANSCODE_SAMPLE_RATE=&#x27;44100&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="available-lossless-audio-codecs">Available Lossless Audio Codecs<a class="hash-link" href="#available-lossless-audio-codecs" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -codecs </span><span class="token operator" style="color:#393A34">|&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.EA..S&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>or</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> container </span><span class="token builtin class-name">exec</span><span class="token plain"> -it web ffmpeg -codecs </span><span class="token operator" style="color:#393A34">|&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.EA..S&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> container </span><span class="token builtin class-name">exec</span><span class="token plain"> -it web ffmpeg -codecs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token operator" style="color:#393A34">|&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.EA..S&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&#x27;s| \([^ ]\+\) \([^ ]\+\) \+\(.\+\)|\1\t\2\t\3|&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tabulate --sep </span><span class="token string" style="color:#e3116c">$&#x27;</span><span class="token string entity" style="color:#36acaa">\t</span><span class="token string" style="color:#e3116c">&#x27;</span><span class="token plain"> --format pipe</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><table><thead><tr><th>Attributes</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>DEA..S</td><td>alac</td><td>ALAC (Apple Lossless Audio Codec)</td></tr><tr><td>DEA.LS</td><td>dts</td><td>DCA (DTS Coherent Acoustics) (decoders: dca ) (encoders: dca )</td></tr><tr><td>DEA..S</td><td>flac</td><td>FLAC (Free Lossless Audio Codec)</td></tr><tr><td>DEA..S</td><td>mlp</td><td>MLP (Meridian Lossless Packing)</td></tr><tr><td>DEA..S</td><td>pcm_f32be</td><td>PCM 32-bit floating point big-endian</td></tr><tr><td>DEA..S</td><td>pcm_f32le</td><td>PCM 32-bit floating point little-endian</td></tr><tr><td>DEA..S</td><td>pcm_f64be</td><td>PCM 64-bit floating point big-endian</td></tr><tr><td>DEA..S</td><td>pcm_f64le</td><td>PCM 64-bit floating point little-endian</td></tr><tr><td>DEA..S</td><td>pcm_s16be</td><td>PCM signed 16-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_s16be_planar</td><td>PCM signed 16-bit big-endian planar</td></tr><tr><td>DEA..S</td><td>pcm_s16le</td><td>PCM signed 16-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_s16le_planar</td><td>PCM signed 16-bit little-endian planar</td></tr><tr><td>DEA..S</td><td>pcm_s24be</td><td>PCM signed 24-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_s24daud</td><td>PCM D-Cinema audio signed 24-bit</td></tr><tr><td>DEA..S</td><td>pcm_s24le</td><td>PCM signed 24-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_s24le_planar</td><td>PCM signed 24-bit little-endian planar</td></tr><tr><td>DEA..S</td><td>pcm_s32be</td><td>PCM signed 32-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_s32le</td><td>PCM signed 32-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_s32le_planar</td><td>PCM signed 32-bit little-endian planar</td></tr><tr><td>DEA..S</td><td>pcm_s64be</td><td>PCM signed 64-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_s64le</td><td>PCM signed 64-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_s8</td><td>PCM signed 8-bit</td></tr><tr><td>DEA..S</td><td>pcm_s8_planar</td><td>PCM signed 8-bit planar</td></tr><tr><td>DEA..S</td><td>pcm_u16be</td><td>PCM unsigned 16-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_u16le</td><td>PCM unsigned 16-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_u24be</td><td>PCM unsigned 24-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_u24le</td><td>PCM unsigned 24-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_u32be</td><td>PCM unsigned 32-bit big-endian</td></tr><tr><td>DEA..S</td><td>pcm_u32le</td><td>PCM unsigned 32-bit little-endian</td></tr><tr><td>DEA..S</td><td>pcm_u8</td><td>PCM unsigned 8-bit</td></tr><tr><td>DEA..S</td><td>s302m</td><td>SMPTE 302M</td></tr><tr><td>DEA..S</td><td>truehd</td><td>TrueHD</td></tr><tr><td>DEA..S</td><td>tta</td><td>TTA (True Audio)</td></tr><tr><td>DEA.LS</td><td>wavpack</td><td>WavPack (encoders: wavpack libwavpack )</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="available-formats">Available Formats<a class="hash-link" href="#available-formats" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -formats</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>or</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> container </span><span class="token builtin class-name">exec</span><span class="token plain"> -it web ffmpeg -formats</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="s3-file-name">S3 File Name<a class="hash-link" href="#s3-file-name" title="Direct link to heading">‚Äã</a></h2><p><code>server/src/lib/clip.ts</code>:<code>saveClip()</code>
Saving the audio content on S3.</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> client_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> headers </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sentenceId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sentence_id</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> folder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client_id </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePrefix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sentenceId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> clipFileName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> folder </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> filePrefix </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;.&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">TRANSCODE</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FORMAT</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">s3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">upload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token literal-property property" style="color:#36acaa">Bucket</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">CLIP_BUCKET_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token literal-property property" style="color:#36acaa">Key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> clipFileName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token literal-property property" style="color:#36acaa">Body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> audioOutput</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>I think utterances are identified by a <code>client_id + sentenceId</code>.
The recording are saved in a bucket and there metadata in a database.
<code>this.model.db.clipExists(client_id, sentenceId)</code></p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">saveClip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">client_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> client_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">localeId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> sentence</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">locale_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">original_sentence_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> sentenceId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> clipFileName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">sentence</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> sentence</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">text</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="s3proxy">S3proxy<a class="hash-link" href="#s3proxy" title="Direct link to heading">‚Äã</a></h2><p>What is stored in our S3 proxy.
This is similar to <code>ls</code>.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9001/common-voice-clips </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xmllint --format -</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;ListBucketResult xmlns=&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;Name&gt;common-voice-clips&lt;/Name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;Prefix/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;MaxKeys&gt;1000&lt;/MaxKeys&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;Marker/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;IsTruncated&gt;false&lt;/IsTruncated&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;Contents&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Key&gt;18f74bcf-210c-43e6-b443-78248399c0ce/&lt;/Key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;LastModified&gt;2022-01-18T19:28:13Z&lt;/LastModified&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;ETag&gt;&quot;d41d8cd98f00b204e9800998ecf8427e&quot;&lt;/ETag&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Size&gt;4096&lt;/Size&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;StorageClass&gt;STANDARD&lt;/StorageClass&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Owner&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;ID&gt;75aa57f09aa0c8caeab4f8c24e99d10f8e7faeebf76c078efc7c6caea54ba06a&lt;/ID&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;DisplayName&gt;CustomersName@amazon.com&lt;/DisplayName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/Owner&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/Contents&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;Contents&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Key&gt;18f74bcf-210c-43e6-b443-78248399c0ce/00003ee1748579223ce314d00265913ba19835024b6e536f0d425230da27a629.mp3&lt;/Key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;LastModified&gt;2022-01-18T19:25:38Z&lt;/LastModified&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;ETag&gt;&quot;31c67dbfbb001f63468af54c228b77b6&quot;&lt;/ETag&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Size&gt;35901&lt;/Size&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;StorageClass&gt;STANDARD&lt;/StorageClass&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;Owner&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;ID&gt;75aa57f09aa0c8caeab4f8c24e99d10f8e7faeebf76c078efc7c6caea54ba06a&lt;/ID&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;DisplayName&gt;CustomersName@amazon.com&lt;/DisplayName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/Owner&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/Contents&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/ListBucketResult&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Retrieve a file and check what file type it is.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9001/common-voice-clips/18f74bcf-210c-43e6-b443-78248399c0ce/00003ee1748579223ce314d00265913ba19835024b6e536f0d425230da27a629.mp3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> -</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/dev/stdin: Audio file with ID3 version 2.4.0, contains:MPEG ADTS, layer III, v1, 48 kbps, 32 kHz, Monaural</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-youre-on-the-staging-server">Why <code>You&#x27;re on the staging server.</code><a class="hash-link" href="#why-youre-on-the-staging-server" title="Direct link to heading">‚Äã</a></h2><p>Originating from <code>web/src/components/layout/layout.tsx</code>
It uses <code>web/src/utility.ts:isProduction()</code> which simply check if the <code>window.location.origin === URLS.HTTP_ROOT</code> where <code>URLS.HTTP_ROOT</code> is <code>https://commonvoice.mozilla.org</code>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="microsoft-azure">Microsoft Azure<a class="hash-link" href="#microsoft-azure" title="Direct link to heading">‚Äã</a></h2><p>Can we use Microsoft Azure instead of AWS S#?</p><ul><li><a href="https://devblogs.microsoft.com/cse/2016/05/22/access-azure-blob-storage-from-your-apps-using-s3-api/" target="_blank" rel="noopener noreferrer">Access Azure Blob Storage from Your Apps using S3 Java API</a></li><li><a href="https://github.com/gaul/s3proxy" target="_blank" rel="noopener noreferrer">S3Proxy</a> S3Proxy implements the S3 API and proxies requests, enabling several use cases:<ul><li>translation from S3 to Backblaze B2, EMC Atmos, Google Cloud, Microsoft Azure, and OpenStack Swift</li><li>testing without Amazon by using the local filesystem</li><li>extension via middlewares</li><li>embedding into Java applications</li></ul></li><li><a href="https://github.com/gaul/s3proxy/wiki/Storage-backend-examples#azure-blob" target="_blank" rel="noopener noreferrer">S3Proxy - Storage backend examples Azure Blob</a></li></ul><p>The common voice docker stack uses S3Proxy.
If we can configure S3Proxy to ingest the current S3 requests from the server and send them to Microsoft Azure, that would solve our connection problem.
It looks like the S3Proxy container is quite configurable with <a href="https://github.com/gaul/s3proxy/blob/master/Dockerfile" target="_blank" rel="noopener noreferrer">environment variables</a>.</p><p>Here&#x27;s what the S3Proxy command looks like:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> container </span><span class="token builtin class-name">exec</span><span class="token plain"> -it s3proxy </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> run-docker-container.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec java \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -DLOG_LEVEL=&quot;${LOG_LEVEL}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.endpoint=&quot;${S3PROXY_ENDPOINT}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.virtual-host=&quot;${S3PROXY_VIRTUALHOST}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.authorization=&quot;${S3PROXY_AUTHORIZATION}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.identity=&quot;${S3PROXY_IDENTITY}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.credential=&quot;${S3PROXY_CREDENTIAL}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.cors-allow-all=&quot;${S3PROXY_CORS_ALLOW_ALL}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.cors-allow-origins=&quot;${S3PROXY_CORS_ALLOW_ORIGINS}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.cors-allow-methods=&quot;${S3PROXY_CORS_ALLOW_METHODS}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.cors-allow-headers=&quot;${S3PROXY_CORS_ALLOW_HEADERS}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Ds3proxy.ignore-unknown-headers=&quot;${S3PROXY_IGNORE_UNKNOWN_HEADERS}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.provider=&quot;${JCLOUDS_PROVIDER}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.identity=&quot;${JCLOUDS_IDENTITY}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.credential=&quot;${JCLOUDS_CREDENTIAL}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.endpoint=&quot;${JCLOUDS_ENDPOINT}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.region=&quot;${JCLOUDS_REGION}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.regions=&quot;${JCLOUDS_REGIONS}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.keystone.version=&quot;${JCLOUDS_KEYSTONE_VERSION}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.keystone.scope=&quot;${JCLOUDS_KEYSTONE_SCOPE}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.keystone.project-domain-name=&quot;${JCLOUDS_KEYSTONE_PROJECT_DOMAIN_NAME}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Djclouds.filesystem.basedir=&quot;/data&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -jar /opt/s3proxy/s3proxy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --properties /dev/null</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If we start from <a href="https://github.com/gaul/s3proxy/wiki/Storage-backend-examples#azure-blob" target="_blank" rel="noopener noreferrer">S3Proxy - Storage backend examples Azure Blob</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">s3proxy.endpoint=http://127.0.0.1:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3proxy.authorization=aws-v2-or-v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3proxy.identity=local-identity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3proxy.credential=local-credential</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jclouds.provider=azureblob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jclouds.identity=xxxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jclouds.credential=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and the common voice&#x27;s <code>docker-compose.yaml</code>, we can probably set it up to use Microsoft Azure.</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">s3proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> S3PROXY_AUTHORIZATION=none</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We need to set a minimum of environment variables.</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">s3proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> S3PROXY_ENDPOINT=http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//0.0.0.0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> S3PROXY_AUTHORIZATION=aws</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v2</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">or</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> S3PROXY_IDENTITY=local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">identity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> S3PROXY_CREDENTIAL=local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">credential</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> JCLOUDS_PROVIDER=azureblob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> JCLOUDS_IDENTITY=xxxxxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> JCLOUDS_CREDENTIAL=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="nextcloud">nextcloud<a class="hash-link" href="#nextcloud" title="Direct link to heading">‚Äã</a></h2><p><a href="https://code.blogs.iiidefix.net/posts/webdav-with-curl/" target="_blank" rel="noopener noreferrer">WEBDAV WITH CURL</a></p><p><a href="https://stackoverflow.com/a/26676902" target="_blank" rel="noopener noreferrer">list files/folders in owncloud with php curl</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X PROPFIND -u user:password &quot;http://yourserver.com/owncloud/remote.php/webdav/&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>PROPFIND = get the list of files/folders</li><li>MKCOL = create folder</li><li>DELETE = delete file/folder</li><li>MOVE = move or rename a file or folder</li><li>PUT = upload file</li><li>GET = download file</li></ul><p>webdav.list_files</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a:propfind xmlns:a=&quot;DAV:&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a:prop&gt;&lt;a:resourcetype/&gt;&lt;/a:prop&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/a:propfind&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Note that the order of the following command is crutial, or so it seems.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u 2c523d8d-449f-4176-bb05-SSSSSSSSSSSS:cPmzY-ZZZZZ-PD8dd-SSSSS-2DC3F </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -X PROPFIND </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://nextcloud.nrc-cnrc.gc.ca/remote.php/dav/files/2c523d8d-449f-4176-bb05-SSSSSSSSSSSS/CommonVoice/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --upload-file - </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Depth: 1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> webdav.list_files</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="file-changed-so-far">File Changed so Far.<a class="hash-link" href="#file-changed-so-far" title="Direct link to heading">‚Äã</a></h2><ul><li><code>server/src/lib/api.ts</code> <code>saveAvatarClip()</code> which I don&#x27;t think I should&#x27;ve change because it&#x27;s probably not related to the recordings.</li><li><code>server/src/lib/bucket.ts</code> <code>getRandomClips()</code></li><li><code>server/src/lib/clip.ts</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/joanise/common-voice-docs/tree/main/docs/note.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/common-voice-docs/docs/intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction to NRC&#x27;s Common Voice project and fork</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li><li><a href="#tasks" class="table-of-contents__link toc-highlight">Tasks</a></li><li><a href="#auth0" class="table-of-contents__link toc-highlight">Auth0</a><ul><li><a href="#whitelisting-emails" class="table-of-contents__link toc-highlight">Whitelisting emails</a></li></ul></li><li><a href="#languages" class="table-of-contents__link toc-highlight">Languages</a><ul><li><a href="#how-to-add-a-new-language" class="table-of-contents__link toc-highlight">How to Add a New Language</a></li></ul></li><li><a href="#changing-the-audio-format" class="table-of-contents__link toc-highlight">Changing the Audio Format</a><ul><li><a href="#available-lossless-audio-codecs" class="table-of-contents__link toc-highlight">Available Lossless Audio Codecs</a></li><li><a href="#available-formats" class="table-of-contents__link toc-highlight">Available Formats</a></li></ul></li><li><a href="#s3-file-name" class="table-of-contents__link toc-highlight">S3 File Name</a></li><li><a href="#s3proxy" class="table-of-contents__link toc-highlight">S3proxy</a></li><li><a href="#why-youre-on-the-staging-server" class="table-of-contents__link toc-highlight">Why <code>You&#39;re on the staging server.</code></a></li><li><a href="#microsoft-azure" class="table-of-contents__link toc-highlight">Microsoft Azure</a></li><li><a href="#nextcloud" class="table-of-contents__link toc-highlight">nextcloud</a></li><li><a href="#file-changed-so-far" class="table-of-contents__link toc-highlight">File Changed so Far.</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/common-voice-docs/docs/intro/">Intro to Common Voice at NRC</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/joanise/common-voice-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 National Research Council Canada. Built with Docusaurus.</div></div></div></footer></div>
<script src="/common-voice-docs/assets/js/runtime~main.28359d4a.js"></script>
<script src="/common-voice-docs/assets/js/main.273f218e.js"></script>
</body>
</html>